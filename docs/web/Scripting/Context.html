<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Context Element</title>
  <style type="text/css">
    p {margin: 3.0px 0.0px 12.0px 0.25in; font: 14.0px Times; width: 7.5in}
    p.toc1 {margin: 6.0px 0.0px 6.0px 0.25in; font: 14.0px Times Bold; text-decoration: none}
    p.toc2 {margin: 4.0px 0.0px 4.0px 0.50in; font: 12.0px Times Bold; text-decoration: none}
    p.toc3 {margin: 3.0px 0.0px 3.0px 0.75in; font: 10.0px Times Bold; text-decoration: none}
    p.body {margin: 3.0px 0.0px 3.0px 0.0px; font: 14.0px Times; width: 7.5in}
    p.code {margin: 10.0px 0.0px 10.0px 0.25in; font: 12.0px Courier New; color: #308030}
    div.xml {margin: 10.0px 0.0px 10.0px 1.0in; font: 12.0px Courier New; color: #308030}
    table.t1 {width: 8in; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080}
    td.td1 {width: 2in; background-color: #b6d5ce; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #648480 #648480
    div.footnote {margin: 6.0px 0.0px 6.0px 0.0px; font: 8px Times; width: 7.5in}</style>
</head>
<body>
<h2>Context</h2>
<h4>Overview</h4>
<p>
The <i>context</i> script element executes its children within a
nested context. The <i>source</i> attribute
or element contains an xpath that returns a node-set, the first node of
which is the context in which the
children are executed.</p>
<p>
The <i>context</i> script element is identical to the <i>for</i>
script element when the source node-set
only returns one node. Using the <i>context</i> script element better
expresses the intent and avoids the
possibility of accidentally executing the script multiple times.</p>
<p>
Variables assigned in a nested context are only visible in the nested
context.</p>
<h4>Executing A Script In A Nested Context</h4>
<p>
The following example executes a script in a nested context. Note that
the variables that are assigned
in the script are assigned in the nested context and are not visible
outside the context.</p>
<div class="xml">
&lt;context source="collection('library')/books/book"&gt; <br>
&nbsp; &lt;assign name="x"&gt;.&lt;/assign&gt; <br>
&nbsp; &lt;print&gt;$x&lt;/print&gt;
<br>
&lt;/context&gt;
<br>
&lt;-- $x is not visible here --&gt;
</div>
</body>
</html>
